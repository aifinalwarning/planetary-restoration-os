name: ðŸ” Auto Upload to NFT.Storage

on:
  push:
    branches: [main]

jobs:
  pin-to-ipfs:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ“¥ Checkout Repo
        uses: actions/checkout@v3

      - name: ðŸ“¦ Install NFT.Storage CLI
        run: npm install -g nft.storage

      - name: ðŸ” Write API token
        run: echo "${{ secrets.NFT_STORAGE_TOKEN }}" > .nft-token

      - name: ðŸš€ Upload to IPFS via NFT.Storage
        run: |
          export NFT_STORAGE_API_KEY=$(cat .nft-token)
          nft.storage store-directory ./ --name "planetary-restoration-os"

      - name: âœ… Finished
        run: echo "ðŸ“¡ Repo uploaded to IPFS via NFT.Storage"
